<%- include('../partials/header.ejs') %>

<div class="content">
	<div class="container-xl mb-3">
		<div class="page-header d-print-none">
			<div class="row align-items-center">
				<div class="col">
					<!-- Page pre-title -->
					<div class="page-pretitle">Overview</div>
					<h2 class="page-title">Notice Board</h2>
				</div>
				<!-- Page title actions -->
				<div class="col-auto ms-auto d-print-none">
					<div class="btn-list">
						<span class="d-none d-sm-inline">
							<a href="/login" class="btn btn-primary"> Login </a>
						</span>
						<!-- <a href="/register" class="btn btn-primary d-none d-sm-inline-block"
                    >
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24"
                        stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                        <line x1="12" y1="5" x2="12" y2="19" />
                        <line x1="5" y1="12" x2="19" y2="12" />
                    </svg>
                    Start new Application
                </a> -->
					</div>
				</div>
			</div>
		</div>
	</div>

    
    <%if(ongoingElections.length > 0){%>
        
        <div class="container-xl">
        <div class="row row-cards ">
            <%for(var election of ongoingElections){%>
            <div class="col-md-4">
              <div class="card">
                <ul class="nav nav-tabs nav-tabs-alt" data-bs-toggle="tabs">
                  <li class="nav-item">
                    <a href="#tabs-election-<%=election._id%>" class="nav-link active" data-bs-toggle="tab">Election</a>
                  </li>
                  <li class="nav-item">
                    <a href="#tabs-about-<%=election._id%>" class="nav-link" data-bs-toggle="tab">About</a>
                  </li>
                  <li class="nav-item">
                    <a href="#tabs-position-<%=election._id%>" class="nav-link" data-bs-toggle="tab">Positions</a>
                  </li>
                  
                  <li class="nav-item ms-auto">
                    <a href="#tabs-token-<%=election._id%>" class="nav-link" title="Get Vote Token" data-bs-toggle="tab">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="8" cy="15" r="4" /><line x1="10.85" y1="12.15" x2="19" y2="4" /><line x1="18" y1="5" x2="20" y2="7" /><line x1="15" y1="8" x2="17" y2="10" /></svg>                    </a>
                  </li>
                </ul>
                <div class="card-body">
                  <div class="tab-content">
                    <div class="tab-pane active show" id="tabs-election-<%=election._id%>">
                     <div class="">
                          <a class=" card-link" href="#">
                <div class="card-cover card-cover-blurred text-center" style="background-image: url(/static/photos/2854fd67ddbd6217.jpg
)">
                  <span class="avatar avatar-xl avatar-thumb " style="background-image: url(<%=election.banner%>)"></span>
                </div>
                <div class="card-body text-center">
                  <div class="card-title mb-1"><%=election.header%></div>
                  <div href="#" class="text-muted">Since <%=moment(election.startsAt).fromNow()%> | <span id="timeLeft"></span></div>
                  
                </div>
              </a>
                            
                          </div>
                    </div>
                    <div class="tab-pane" id="tabs-about-<%=election._id%>">
                      <div>Fringilla egestas nunc quis tellus diam rhoncus ultricies tristique enim at diam, sem nunc amet, pellentesque id egestas velit sed</div>
                    </div>
                    <div class="tab-pane" id="tabs-position-<%=election._id%>">
                      <div>Fringilla egestas nunc quis tellus diam rhoncus ultricies tristique enim at diam, sem nunc amet, pellentesque id egestas velit sed</div>
                    </div>
                    <div class="tab-pane" id="tabs-token-<%=election._id%>">
                      <div>Donec ac vitae diam amet vel leo egestas consequat rhoncus in luctus amet, facilisi sit mauris accumsan nibh habitant senectus</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <%}%> 
        </div>
    </div>
         
    <%}else{%>
      <div class="container-xl d-flex flex-column justify-content-center">
		<div class="empty">
			<div class="empty-img">
				<img
					src="./static/illustrations/undraw_printing_invoices_5r4r.svg"
					height="128"
					alt=""
				/>
			</div>
			<p class="empty-title">No ongoing election at the moment</p>
			<p class="empty-subtitle text-muted">
				But you can still check out the results of the previous elections.
			</p>
			<div class="empty-action">
				<a href="./." class="btn btn-primary">
					<svg
						xmlns="http://www.w3.org/2000/svg"
						class="icon"
						width="24"
						height="24"
						viewBox="0 0 24 24"
						stroke-width="2"
						stroke="currentColor"
						fill="none"
						stroke-linecap="round"
						stroke-linejoin="round"
					>
						<path stroke="none" d="M0 0h24v24H0z" fill="none" />
						<circle cx="12" cy="12" r="2" />
						<path
							d="M22 12c-2.667 4.667 -6 7 -10 7s-7.333 -2.333 -10 -7c2.667 -4.667 6 -7 10 -7s7.333 2.333 10 7"
						/>
					</svg>
					Check election results
				</a>
			</div>
		</div>
        </div>  
    <%}%>
	

</div>
<!-- <%- include('../partials/footer.ejs') %> -->

<script type="text/javascript" >
const moment = "<%=moment()%>"
var eventTime= Date.now("<%=election.endsAt%>")
var currentTime = Date.now();
var diffTime = eventTime - currentTime;
var duration = moment.duration(diffTime*1000, 'milliseconds');
var interval = 1000;

setInterval(function(){
  duration = moment.duration(duration - interval, 'milliseconds') ;
    $('#timeLeft').text(duration.hours() + ":" + duration.minutes() + ":" + duration.seconds())
    alert(2)
}, interval);
</script>